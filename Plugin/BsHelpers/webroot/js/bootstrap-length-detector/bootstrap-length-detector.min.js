/* ========================================================== 
 * 
 * bootstrap-length-detector.js v 1.7.0 
 * Copyright 2015 Web And Cow
 * Licensed under MIT License
 * URL: https://github.com/WebAndCow/bootstrap-length-detector/blob/master/LICENSE
 *
 * ========================================================== */

!function(a){"use strict";a.event.special.destroyed||(a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}),a.fn.extend({lengthDetector:function(b,c){function d(b){var c;return a.configs?"undefined"===a.type(b)?c=a.configs.defaults:"string"===a.type(b)&&("undefined"!==a.type(a.configs[b])?c=a.configs[b]:console.error("No such configs in config files.")):a.error("jQuery.configs rules are not loaded, plz add configuration files to the page"),c}function e(b){var c=b.data(),d={},e=0;return d.interval={},a.each(b.data(),function(a,b){-1!==a.search(/interval\d/)?(d.interval[e]=g(b),e++):"interval"===a&&(c.interval="",console.error("Interval in data attributes is not set correctly."))}),a.isEmptyObject(d.interval)||a.extend(c,d),c}function f(c){var f=d(c.data("length-detector-class")),g=e(c);b=a.extend({},b,f,g,z)}function g(b){var c={};return c.limitChars=b.substr(0,b.search(/ /)),b=b.replace(c.limitChars+" ",""),c.bsClass=a.trim(b.match(/^([\w\d-]*|#.{3,6}|rgb\(.*\)|{.*})\s/)[0]),-1!==c.bsClass.search(/^{.*}$/)&&(c.bsClass=JSON.parse(c.bsClass)),c.message=b.replace(c.bsClass+" ",""),c}function h(a){var c=a.val();c=b.twoCharLinebreak?c.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):c.replace(new RegExp("\r?\n","g"),"\n");var d=0;return d=b.utf8?j(c):c.length}function i(a,c){var d=a.val(),e=0;b.twoCharLinebreak&&(d=d.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"),"\n"===d.substr(d.length-1)&&d.length%2===1&&(e=1)),a.val(d.substr(0,c-e))}function j(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:b+=d>127&&2048>d?2:3}return b}function k(a,c,d){var e=!0;return!b.alwaysShow&&d-h(a)>c&&(e=!1),e}function l(a,b){var c=b-h(a);return c}function m(c,d){var e="label";if("undefined"!==a.type(c))if("object"===a.type(c)){var f=a.extend(d.attr("style"),c);d.css(f)}else d.removeAttr("style").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}),-1!==c.search(/^(#.{3,6}|rgb\(.*\))/)?d.css("background-color",c):(d.css("background-color",""),e+=" "+e+"-"+c);else e+=" "+e+"-"+b.defaultClass,console.error("No style defined for this interval.");return e}function n(a,b){b.css({display:"block"}),a.trigger("maxLength.shown")}function o(a,b){b.css({display:"none"}),a.trigger("maxlength.hidden")}function p(a,c,d,e){var f='<span style="font-size:125%">';return b.message?f="function"==typeof b.message?b.message(a,c):b.message.replace("%charsTyped%",d).replace("%charsRemaining%",c-d).replace("%charsTotal%",c):(b.preText&&(f+=b.preText),f+=b.showCharsTyped?d:c-d,b.showMaxLength&&(f+=b.separator+c),b.postText&&(f+=b.postText)),e&&!s(e)&&(f+=". </span>"+e),f}function q(b,c){var d=[];if(""!==b){var e,f=0,g=!1;a.each(b,function(a,b){return g&&c<=b.limitChars?(e=b.limitChars,d=b,!1):(d="undefined",void(c>b.limitChars&&(f=b.limitChars,g=!0)))}),0===f&&a.each(b,function(a,b){return e=b.limitChars,d=b,!1})}else d="undefined";return d}function r(a){if(a)for(var b=Object.keys(a).length,c=b-1;c>0;c--)for(var d=0;c>d;d++)if(a[d].limitChars>a[d+1].limitChars){var e={};e=a[d],a[d]=a[d+1],a[d+1]=e}return a}function s(b){return""===a.trim(b)||"undefined"===b}function t(a,c,d,e){if(e){var f,g=q(b.interval,h(c));e.html(p(c.val(),d,d-a,g.message)),a>0?"undefined"===g||""===b.interval?k(c,b.threshold,d)?(f=m(b.defaultClass,e),n(c,e.removeClass(b.previousClass).addClass(f)),b.previousClass=f):o(c,e):k(c,b.threshold,d)?(f=m(g.bsClass,e),n(c,e.removeClass(b.previousClass).addClass(f)),b.previousClass=f):o(c,e):(f=m(b.limitReachedClass,e),n(c,e.removeClass(b.previousClass).addClass(f)),b.previousClass=f)}b.allowOverMax&&(0>a?c.addClass("overmax"):c.removeClass("overmax"))}function u(b){var c=b[0];return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():{width:c.offsetWidth,height:c.offsetHeight},b.offset())}function v(c,d){var e=u(c);if("function"===a.type(b.placement))return void b.placement(c,d,e);if(a.isPlainObject(b.placement))return void w(b.placement,d);var f=c.outerWidth(),g=d.outerWidth(),h=d.width(),i=d.height();switch(b.appendToParent&&(e.top-=c.parent().offset().top,e.left-=c.parent().offset().left),b.placement){case"bottom":d.css({top:e.top+e.height,left:e.left+e.width/2-h/2});break;case"top":d.css({top:e.top-i,left:e.left+e.width/2-h/2});break;case"left":d.css({top:e.top+e.height/2-i/2,left:e.left-h});break;case"right":d.css({top:e.top+e.height/2-i/2,left:e.left+e.width});break;case"bottom-right":d.css({top:e.top+e.height,left:e.left+e.width});break;case"top-right":d.css({top:e.top-i,left:e.left+f});break;case"top-left":d.css({top:e.top-i,left:e.left-g});break;case"bottom-left":d.css({top:e.top+c.outerHeight(),left:e.left-g});break;case"centered-right":d.css({top:e.top+i/2,left:e.left+f-g-3});break;case"bottom-right-inside":d.css({top:e.top+e.height,left:e.left+e.width-g});break;case"top-right-inside":d.css({top:e.top-i,left:e.left+f-g});break;case"top-left-inside":d.css({top:e.top-i,left:e.left});break;case"bottom-left-inside":d.css({top:e.top+c.outerHeight(),left:e.left})}}function w(c,d){if(c&&d){var e=["top","bottom","left","right","position"],f={};a.each(e,function(a,c){var d=b.placement[c];"undefined"!=typeof d&&(f[c]=d)}),d.css(f)}}function x(a){var c="maxlength";return b.allowOverMax&&(c="data-bs-mxl"),a.attr(c)||a.attr("size")}var y=a("body");a.isFunction(b)&&!c&&(c=b,b={});var z=b;return b=a.extend({},a.configs.defaults,b),this.each(function(){function c(){f(g);var c=p(g.val(),d,"0","");d=x(g),r(b.interval),e||(e=a('<span class="length-detector"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(c)),g.is("textarea")&&(g.data("maxlenghtsizex",g.outerWidth()),g.data("maxlenghtsizey",g.outerHeight()),g.mouseup(function(){(g.outerWidth()!==g.data("maxlenghtsizex")||g.outerHeight()!==g.data("maxlenghtsizey"))&&v(g,e),g.data("maxlenghtsizex",g.outerWidth()),g.data("maxlenghtsizey",g.outerHeight())})),b.appendToParent?(g.parent().append(e),g.parent().css("position","relative")):y.append(e);var h=l(g,x(g));t(h,g,d,e),v(g,e)}var d,e,g=a(this);a(window).resize(function(){e&&v(g,e)}),b.allowOverMax&&(a(this).attr("data-bs-mxl",a(this).attr("maxlength")),a(this).removeAttr("maxlength")),b.showOnReady?g.ready(function(){c()}):g.focus(function(){c()}),g.on("maxLength.reposition",function(){v(g,e)}),g.on("destroyed",function(){e&&e.remove()}),g.on("blur",function(){e&&!b.showOnReady&&e.remove()}),g.on("input",function(){var a=x(g),c=l(g,a),f=!0;return b.validate&&0>c?(i(g,a),f=!1):t(c,g,d,e),v(g,e),f})})}})}(jQuery);